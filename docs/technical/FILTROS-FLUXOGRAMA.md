# ๐ Fluxograma de Filtros

## Fluxo de Recomendaรงรฃo

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    INรCIO: recommend()                       โ
โ                  all_cars (ex: 500 carros)                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 1: Orรงamento (SEMPRE OBRIGATรRIO)                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ  Entrada: 500 carros                                         โ
โ  Critรฉrio: R$ 30k - R$ 60k                                   โ
โ  Saรญda: 300 carros                                           โ
โ  Log: [FILTRO] Apรณs orรงamento: 300 carros                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 2: Ano (OPCIONAL โ OBRIGATรRIO)                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ  Entrada: 300 carros                                         โ
โ  Critรฉrio: 2018 - 2020 (se especificado)                    โ
โ  Saรญda: 150 carros                                           โ
โ  Log: [FILTRO] Apรณs ano 2018-2020: 150 carros               โ
โ                                                              โ
โ  Se NรO especificado: passa todos (300 carros)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 3: Quilometragem (OPCIONAL โ OBRIGATรRIO)           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 150 carros                                         โ
โ  Critรฉrio: <= 50.000 km (se especificado)                   โ
โ  Saรญda: 80 carros                                            โ
โ  Log: [FILTRO] Apรณs km <= 50000: 80 carros                  โ
โ                                                              โ
โ  Se NรO especificado: passa todos (150 carros)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 4: Must-haves (OPCIONAL โ OBRIGATรRIO)              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 80 carros                                          โ
โ  Critรฉrio: ["ISOFIX", "6_airbags"] (se especificado)        โ
โ  Saรญda: 40 carros                                            โ
โ  Log: [FILTRO] Apรณs must-haves: 40 carros                   โ
โ                                                              โ
โ  Se NรO especificado: passa todos (80 carros)               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 5: Raio Geogrรกfico (OPCIONAL โ OBRIGATรRIO)         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 40 carros                                          โ
โ  Critรฉrio: 30 km de Sรฃo Paulo (se especificado)             โ
โ  Saรญda: 25 carros                                            โ
โ  Log: [FILTRO] Apรณs raio 30km: 25 carros                    โ
โ                                                              โ
โ  Se NรO especificado: passa todos (40 carros)               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 6: Contexto Famรญlia (PRIORIZAรรO)                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 25 carros                                          โ
โ  Aรงรฃo: Reordena (family-friendly primeiro)                  โ
โ  Saรญda: 25 carros (mesma quantidade, ordem diferente)       โ
โ  Nota: NรO elimina carros, apenas prioriza                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 7: Contexto Primeiro Carro (PRIORIZAรรO)            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 25 carros                                          โ
โ  Aรงรฃo: Reordena (pequenos/econรดmicos primeiro)              โ
โ  Saรญda: 25 carros (mesma quantidade, ordem diferente)       โ
โ  Nota: NรO elimina carros, apenas prioriza                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  FILTRO 8: Uber/99 (OPCIONAL โ OBRIGATรRIO)                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ              โ
โ  Entrada: 25 carros                                          โ
โ  Critรฉrio: Aceito pelo Uber/99 (se perfil = transporte)     โ
โ  Saรญda: 15 carros                                            โ
โ  Log: [FILTRO APP] 15 de 25 carros vรกlidos para uberx       โ
โ                                                              โ
โ  Se perfil โ transporte: passa todos (25 carros)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
                    โโโโโโดโโโโโ
                    โ Tem      โ
                    โ carros?  โ
                    โโโโโโฌโโโโโ
                         โ
            โโโโโโโโโโโโโโดโโโโโโโโโโโโโ
            โ                         โ
           SIM                       NรO
            โ                         โ
            โผ                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ
โ  Calcular Scores     โ  โ  Retornar []         โ
โ  Ordenar por Score   โ  โ  Log: [AVISO]        โ
โ  Retornar Top N      โ  โ  Nenhum carro apรณs   โ
โ                      โ  โ  filtros             โ
โ  Resultado:          โ  โ                      โ
โ  15 carros           โ  โ  Frontend mostra:    โ
โ  (todos atendem      โ  โ  "Nenhum carro       โ
โ   TODOS os filtros)  โ  โ   encontrado"        โ
โโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Exemplo: Busca Restritiva

```
Entrada do Usuรกrio:
โโ Orรงamento: R$ 10k - R$ 30k
โโ Ano: 2020 - 2025
โโ Km: <= 30.000
โโ Must-haves: ["ISOFIX", "6_airbags"]
โโ Uso: Uber/99

Fluxo:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ all_cars: 500 carros                โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs orรงamento: 80 carros           โ โ Muitos eliminados (orรงamento baixo)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs ano 2020-2025: 10 carros       โ โ Muitos eliminados (ano muito recente)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs km <= 30k: 5 carros            โ โ Alguns eliminados (km baixa)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs must-haves: 2 carros           โ โ Muitos eliminados (itens especรญficos)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs Uber/99: 0 carros              โ โ TODOS eliminados (nรฃo aceitos)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ RESULTADO: Lista vazia []           โ
โ                                     โ
โ Frontend mostra:                    โ
โ "Nenhum carro encontrado"           โ
โ                                     โ
โ Sugestรตes:                          โ
โ โข Aumente o orรงamento               โ
โ โข Amplie a faixa de anos            โ
โ โข Remova alguns filtros             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Exemplo: Busca Bem-Sucedida

```
Entrada do Usuรกrio:
โโ Orรงamento: R$ 50k - R$ 80k
โโ Ano: 2018 - 2020
โโ Uso: Famรญlia
โโ Prioridades: Seguranรงa (5), Espaรงo (5)

Fluxo:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ all_cars: 500 carros                โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs orรงamento: 300 carros          โ โ Faixa razoรกvel
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Apรณs ano 2018-2020: 150 carros      โ โ Faixa comum
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Contexto famรญlia: 150 carros        โ โ Reordena (SUV/Van primeiro)
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Calcular scores                     โ
โ Ordenar por match                   โ
โ Retornar top 10                     โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ RESULTADO: 10 carros                โ
โ                                     โ
โ Todos atendem:                      โ
โ โ Orรงamento R$ 50k-80k             โ
โ โ Ano 2018-2020                    โ
โ โ Adequados para famรญlia           โ
โ โ Ordenados por match score        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Tipos de Filtros

### ๐ด Eliminatรณrios (Hard Constraints)
Eliminam carros que nรฃo atendem ao critรฉrio:
- Orรงamento
- Ano (min/max)
- Quilometragem
- Must-haves
- Raio geogrรกfico
- Uber/99

### ๐ก Priorizadores (Soft Constraints)
Reordenam carros, mas nรฃo eliminam:
- Contexto famรญlia
- Contexto primeiro carro
- Localizaรงรฃo (prioriza mesma cidade)

### ๐ข Scoring
Calculam compatibilidade (0.0 - 1.0):
- Categoria por uso
- Prioridades do usuรกrio
- Preferรชncias (marcas, tipos)
- Posiรงรฃo no orรงamento

---

## Regra de Ouro

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                                      โ
โ  Se o usuรกrio selecionou um filtro,                 โ
โ  TODOS os resultados DEVEM atender a esse filtro.   โ
โ                                                      โ
โ  Nunca use fallback que ignore filtros!             โ
โ                                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
