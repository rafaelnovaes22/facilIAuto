# üìö Fase 1: Linguagem Acess√≠vel e Did√°tica - Guia de Comunica√ß√£o

## üéØ Problema

**Jarg√µes t√©cnicos afastam usu√°rios comuns:**

‚ùå **Exemplo ruim (t√©cnico demais):**
```
"O Volkswagen Taos oferece ISOFIX em todos os assentos traseiros
e TCO de R$ 1.900/m√™s. Sistema ESP com 6 airbags e consumo de 11 km/L."
```

**Problemas:**
- "ISOFIX" ‚Üí 90% dos usu√°rios n√£o sabem o que √©
- "TCO" ‚Üí Sigla t√©cnica intimidadora
- "ESP" ‚Üí Sistema desconhecido
- "km/L" ‚Üí Entendido mas n√£o contextualizado
- Linguagem fria e t√©cnica

---

## ‚úÖ Solu√ß√£o: Traduzir para Portugu√™s Humano

‚úÖ **Exemplo bom (did√°tico):**
```
"O Volkswagen Taos √© perfeito para quem tem crian√ßas pequenas,
com pontos de fixa√ß√£o para cadeirinha em todos os bancos traseiros.
Voc√™ vai gastar em m√©dia R$ 1.900 por m√™s (incluindo parcela, combust√≠vel
e manuten√ß√£o), o que cabe bem no seu or√ßamento."
```

**Melhorias:**
- ‚úÖ "ISOFIX" ‚Üí "pontos de fixa√ß√£o para cadeirinha"
- ‚úÖ "TCO" ‚Üí "quanto voc√™ vai gastar por m√™s"
- ‚úÖ Explica o que est√° inclu√≠do no valor
- ‚úÖ Conecta com a realidade do usu√°rio ("cabe no seu or√ßamento")
- ‚úÖ Linguagem quente e conversacional

---

## üìñ Gloss√°rio: Jarg√£o ‚Üí Portugu√™s Claro

### Termos T√©cnicos de Seguran√ßa

| ‚ùå Jarg√£o T√©cnico | ‚úÖ Linguagem Acess√≠vel | üìù Contexto |
|-------------------|------------------------|-------------|
| **ISOFIX** | "Pontos de fixa√ß√£o para cadeirinha de beb√™" | Usar quando perfil tem crian√ßas |
| **6 airbags** | "Seis bolsas de prote√ß√£o em caso de batida" ou simplesmente "prote√ß√£o refor√ßada" | Mencionar quantidade s√≥ se superior |
| **ABS** | "Freios seguros que evitam derrapagem" ou apenas "freios de seguran√ßa" | S√≥ mencionar se usu√°rio priorizou seguran√ßa |
| **ESP/ESC** | "Controle de estabilidade" ou "sistema que evita perder controle em curvas" | Simplificar ao m√°ximo |
| **Crash test 5 estrelas** | "Aprovado com nota m√°xima em testes de colis√£o" | Traduzir para resultado pr√°tico |

**Regra geral:** Se o termo precisa de explica√ß√£o, simplifique ou contextualize!

### Termos Financeiros

| ‚ùå Jarg√£o T√©cnico | ‚úÖ Linguagem Acess√≠vel | üìù Quando Usar |
|-------------------|------------------------|----------------|
| **TCO (Total Cost of Ownership)** | "Custo mensal total" ou "Quanto voc√™ vai gastar por m√™s" | Sempre traduzir |
| **TCO breakdown** | "Incluindo parcela do financiamento, combust√≠vel, manuten√ß√£o e seguro" | Explicar o que est√° inclu√≠do |
| **Budget percentage** | "X% da sua renda" ou "Y% do que voc√™ ganha" | Contextualizar com renda |
| **Financial health: green** | "Cabe tranquilamente no seu bolso" | Humanizar status |
| **Financial health: yellow** | "Vai apertar um pouco no fim do m√™s" | Ser honesto mas gentil |
| **Financial health: red** | "Pode comprometer seu or√ßamento" | Alertar sem assustar |
| **Down payment** | "Entrada" | Usar termo brasileiro |
| **Monthly installment** | "Parcela mensal" | Portugu√™s direto |

### Termos T√©cnicos de Desempenho

| ‚ùå Jarg√£o T√©cnico | ‚úÖ Linguagem Acess√≠vel | üìù Contexto |
|-------------------|------------------------|-------------|
| **11 km/L** | "Faz 11 km com 1 litro de gasolina" OU "Gasta cerca de R$ X por m√™s em combust√≠vel" | Contextualizar com valor em reais |
| **Consumo urbano vs. rodovi√°rio** | "Na cidade gasta um pouco mais que na estrada" | Simplificar diferen√ßa |
| **150 cv de pot√™ncia** | "Motor potente" ou "Boa for√ßa para subidas" | Traduzir para uso pr√°tico |
| **Torque** | Omitir (usu√°rio comum n√£o entende) | - |
| **0-100 em 9s** | "Acelera bem" ou omitir | S√≥ para perfil "performance" |

### Termos de Conforto e Espa√ßo

| ‚ùå Jarg√£o T√©cnico | ‚úÖ Linguagem Acess√≠vel | üìù Contexto |
|-------------------|------------------------|-------------|
| **Porta-malas de 450L** | "Porta-malas espa√ßoso" ou "Cabe at√© 4 malas grandes" | Visualizar capacidade |
| **Entre-eixos de 2.700mm** | Omitir OU "Espa√ßo interno generoso" | Traduzir para benef√≠cio |
| **5 lugares** | "Cabe a fam√≠lia inteira confortavelmente" (se fam√≠lia de 4-5) | Contextualizar com perfil |
| **Ar-condicionado dual zone** | "Ar-condicionado com controle separado" OU apenas "ar-condicionado" | Simplificar se n√£o for diferencial |
| **Dire√ß√£o el√©trica** | Omitir (padr√£o hoje) OU "Dire√ß√£o leve e f√°cil" | S√≥ mencionar se diferencial |

### Categorias de Ve√≠culos

| Categoria | Explica√ß√£o Did√°tica | Quando Explicar |
|-----------|---------------------|-----------------|
| **SUV** | "Carro mais alto, com boa visibilidade e espa√ßo" | Se usu√°rio n√£o selecionou prefer√™ncia |
| **Hatch** | "Compacto, f√°cil de estacionar" | Sempre contextualizar |
| **Sedan** | "Carro tradicional de 4 portas com porta-malas separado" | Se usu√°rio n√£o familiar |
| **Pickup** | "Caminhonete" (termo brasileiro) | - |
| **SUV Compacto** | "SUV menor, mais econ√¥mico" | Diferenciar de SUV m√©dio/grande |

---

## üé® Prompt Engineering Atualizado

### System Prompt Revisado

```
Voc√™ √© um assistente especialista em recomenda√ß√£o de ve√≠culos, mas
fala de forma SIMPLES e DID√ÅTICA, como um amigo ajudando outro amigo.

REGRAS DE LINGUAGEM:
1. Use portugu√™s coloquial brasileiro (voc√™, seu, sua)
2. Evite siglas e jarg√µes t√©cnicos
3. Traduza termos t√©cnicos para benef√≠cios pr√°ticos:
   - ISOFIX ‚Üí "pontos de fixa√ß√£o para cadeirinha"
   - TCO ‚Üí "custo mensal total" ou "quanto vai gastar por m√™s"
   - ABS ‚Üí "freios de seguran√ßa"
   - km/L ‚Üí contextualize com custo em reais
4. Explique n√∫meros em contexto:
   - "R$ 1.900/m√™s" ‚Üí "R$ 1.900/m√™s (incluindo tudo: parcela, gasolina, manuten√ß√£o)"
   - "24% da renda" ‚Üí "menos de um quarto do que voc√™ ganha"
5. Use linguagem visual e concreta:
   - "450L" ‚Üí "cabe 4 malas grandes"
   - "6 airbags" ‚Üí "prote√ß√£o refor√ßada em caso de batida"
6. Seja honesto mas gentil:
   - ‚ùå "Financial health: red"
   - ‚úÖ "Vai apertar um pouco o or√ßamento, mas √© vi√°vel"

ESTRUTURA DA JUSTIFICATIVA:
1¬™ frase: Por que este carro √© adequado para o uso do usu√°rio (fam√≠lia, trabalho, etc)
2¬™ frase: Destaque financeiro (se cabe no or√ßamento, √© econ√¥mico, etc)
3¬™ frase (opcional): Diferencial importante (seguran√ßa, espa√ßo, confiabilidade)

TAMANHO: 2-3 frases (150-300 caracteres)
TOM: Amig√°vel, claro, honesto
```

### Exemplos de Input/Output Revisados

---

#### **Exemplo 1: Fam√≠lia com Crian√ßas**

**Input:**
```
Carro: Volkswagen Taos 1.4 TSI 2023 - R$ 85.000
Seguran√ßa: 6 airbags, ABS, ESP, ISOFIX
Consumo: 11 km/L cidade

Usu√°rio:
- Uso: fam√≠lia (4 pessoas, 2 crian√ßas de 3 e 5 anos)
- Or√ßamento: R$ 60k - R$ 100k
- Prioridades: seguran√ßa=5, espa√ßo=5, economia=4
- Renda: R$ 8.000/m√™s

An√°lise:
- TCO mensal: R$ 1.900 (24% da renda)
- Principais for√ßas: Seguran√ßa, Espa√ßo, Pre√ßo adequado
```

**Output ANTES (t√©cnico):**
```
"O Volkswagen Taos oferece categoria SUV ideal para fam√≠lia com ISOFIX
em todos os assentos. TCO de R$ 1.900/m√™s (24% da renda) e consumo de 11 km/L."
```

**Output DEPOIS (did√°tico):**
```
"O Volkswagen Taos √© perfeito para sua fam√≠lia de 4, com bastante espa√ßo
e pontos de fixa√ß√£o para cadeirinha nos bancos de tr√°s. Voc√™ vai gastar
cerca de R$ 1.900 por m√™s (incluindo tudo), o que cabe tranquilamente
no seu or√ßamento de R$ 8 mil."
```

---

#### **Exemplo 2: Primeiro Carro**

**Input:**
```
Carro: Renault Kwid 1.0 2022 - R$ 48.000
Consumo: 15 km/L
Categoria: Hatch compacto

Usu√°rio:
- Uso: primeiro_carro
- Or√ßamento: R$ 30k - R$ 60k
- Prioridades: economia=5, custo_manutencao=5
- Renda: R$ 3.500/m√™s

An√°lise:
- TCO mensal: R$ 1.050 (30% da renda)
- Score: 0.82 (82%)
```

**Output ANTES (t√©cnico):**
```
"Categoria hatch compacto ideal para primeiro carro. TCO de R$ 1.050/m√™s
(30% da renda). Excelente economia de 15 km/L."
```

**Output DEPOIS (did√°tico):**
```
"O Renault Kwid √© uma √≥tima escolha para quem est√° come√ßando:
compacto (f√°cil de estacionar) e muito econ√¥mico (gasta s√≥ R$ 300 de
gasolina por m√™s). Por R$ 48 mil, voc√™ fica com folga no or√ßamento
para eventuais imprevistos."
```

---

#### **Exemplo 3: Comercial/Delivery**

**Input:**
```
Carro: Fiat Fiorino 1.4 2021 - R$ 62.000
Capacidade: 650 kg de carga
Consumo: 14 km/L

Usu√°rio:
- Uso: comercial (entregas urbanas)
- Or√ßamento: R$ 50k - R$ 80k
- Prioridades: economia=5, custo_manutencao=5
- Renda: R$ 5.000/m√™s (do neg√≥cio)

An√°lise:
- TCO mensal: R$ 1.400 (28% da renda)
- Adequa√ß√£o comercial: 0.95
```

**Output ANTES (t√©cnico):**
```
"Categoria furg√£o com capacidade de carga de 650kg. TCO operacional
de R$ 1.400/m√™s. Consumo urbano de 14 km/L adequado para rotas de entrega."
```

**Output DEPOIS (did√°tico):**
```
"A Fiat Fiorino √© ideal para entregas na cidade: carrega at√© 650 kg
(bastante espa√ßo para mercadorias) e √© econ√¥mica (14 km/L). Com custo
de R$ 1.400/m√™s, sobra boa margem de lucro nas entregas."
```

---

#### **Exemplo 4: Transporte por App (Uber/99)**

**Input:**
```
Carro: Toyota Corolla 2.0 2020 - R$ 95.000
Categoria: Sedan
Homologado: Uber, 99
Consumo: 12.5 km/L
Confiabilidade: 0.92

Usu√°rio:
- Uso: transporte_passageiros (Uber/99)
- Or√ßamento: R$ 70k - R$ 110k
- Prioridades: confiabilidade=5, economia=5, revenda=4
- Renda mensal esperada: R$ 6.000 (do app)

An√°lise:
- TCO mensal: R$ 2.100 (35% da renda)
- Adequa√ß√£o para app: aprovado
```

**Output ANTES (t√©cnico):**
```
"Sedan homologado para apps de transporte com √≠ndice de confiabilidade 0.92.
TCO de R$ 2.100/m√™s (35% da renda projetada). Consumo de 12.5 km/L adequado
para alta quilometragem."
```

**Output DEPOIS (did√°tico):**
```
"O Toyota Corolla √© aprovado pela Uber e 99, e √© conhecido pela durabilidade
(essencial para quem roda muito). Gastando R$ 2.100/m√™s com o carro, voc√™
precisa trabalhar cerca de 150-180 horas por m√™s para ter bom lucro."
```

---

#### **Exemplo 5: Situa√ß√£o Financeira Apertada**

**Input:**
```
Carro: Chevrolet Onix 1.0 2021 - R$ 72.000
Consumo: 13 km/L

Usu√°rio:
- Uso: trabalho
- Or√ßamento: R$ 60k - R$ 80k
- Prioridades: economia=5
- Renda: R$ 4.000/m√™s

An√°lise:
- TCO mensal: R$ 1.600 (40% da renda)
- Financial health: red (acima de 30%)
```

**Output ANTES (t√©cnico):**
```
"Categoria hatch com TCO de R$ 1.600/m√™s representando 40% da renda mensal.
Status financeiro: red zone. Consumo de 13 km/L."
```

**Output DEPOIS (did√°tico e honesto):**
```
"O Chevrolet Onix √© econ√¥mico (13 km/L), mas o custo mensal de R$ 1.600
vai comprometer 40% da sua renda, o que pode apertar o or√ßamento. Considere
negociar uma entrada maior ou procurar op√ß√µes um pouco mais baratas."
```

---

## üîß Implementa√ß√£o no C√≥digo

### Atualizar `llm_prompts.py`

```python
SYSTEM_PROMPT = """
Voc√™ √© um assistente especialista em recomenda√ß√£o de ve√≠culos, mas
fala de forma SIMPLES e DID√ÅTICA, como um amigo ajudando outro amigo.

REGRAS DE LINGUAGEM:
1. Use portugu√™s coloquial brasileiro (voc√™, seu, sua)
2. Evite siglas e jarg√µes t√©cnicos
3. Traduza termos t√©cnicos para benef√≠cios pr√°ticos:
   - ISOFIX ‚Üí "pontos de fixa√ß√£o para cadeirinha"
   - TCO ‚Üí "custo mensal total" ou "quanto vai gastar por m√™s"
   - ABS/ESP ‚Üí "freios de seguran√ßa" ou "sistemas de seguran√ßa"
   - km/L ‚Üí contextualize com custo em reais ou consumo mensal
4. Explique n√∫meros em contexto:
   - "R$ 1.900/m√™s" ‚Üí "R$ 1.900/m√™s (incluindo tudo: parcela, gasolina, manuten√ß√£o)"
   - "24% da renda" ‚Üí "menos de um quarto do que voc√™ ganha"
5. Use linguagem visual e concreta:
   - "450L porta-malas" ‚Üí "cabe 4 malas grandes"
   - "6 airbags" ‚Üí "prote√ß√£o refor√ßada"
6. Seja honesto mas gentil com limita√ß√µes financeiras

ESTRUTURA: 2-3 frases
- 1¬™: Por que √© adequado para o uso
- 2¬™: Destaque financeiro
- 3¬™ (opcional): Diferencial importante

TOM: Amig√°vel, claro, honesto
"""

# Gloss√°rio de tradu√ß√µes
TERM_TRANSLATIONS = {
    "ISOFIX": "pontos de fixa√ß√£o para cadeirinha de beb√™",
    "TCO": "custo mensal total",
    "ABS": "freios de seguran√ßa",
    "ESP": "controle de estabilidade",
    "ESC": "controle de estabilidade",
    "airbag": "bolsa de prote√ß√£o",
    "SUV": "carro mais alto com boa visibilidade",
    "hatch": "compacto e f√°cil de estacionar",
    "sedan": "carro tradicional de 4 portas",
    "pickup": "caminhonete",
}

# Contextos de uso em linguagem simples
USAGE_DESCRIPTIONS = {
    "familia": "sua fam√≠lia",
    "trabalho": "seu dia a dia",
    "lazer": "passeios e viagens",
    "comercial": "seu neg√≥cio",
    "primeiro_carro": "quem est√° come√ßando",
    "transporte_passageiros": "trabalhar com aplicativos de transporte",
}

# Faixas de custo em linguagem acess√≠vel
def get_financial_health_description(percentage: float) -> str:
    """Traduz % da renda para linguagem acess√≠vel"""
    if percentage <= 20:
        return "cabe tranquilamente no seu bolso"
    elif percentage <= 30:
        return "cabe no seu or√ßamento com alguma folga"
    elif percentage <= 40:
        return "vai comprometer parte significativa da renda, mas √© vi√°vel"
    else:
        return "pode apertar bastante o or√ßamento"

# Tradu√ß√£o de consumo para custo mensal
def translate_fuel_consumption(kmpl: float, monthly_km: int = 1000) -> str:
    """Traduz km/L para custo mensal estimado"""
    fuel_price = 5.20  # M√©dia nacional
    monthly_cost = (monthly_km / kmpl) * fuel_price
    return f"gasta cerca de R$ {monthly_cost:.0f} de gasolina por m√™s (rodando {monthly_km} km)"
```

### Adicionar Helper no `llm_justification_service.py`

```python
def _simplify_text(self, text: str) -> str:
    """
    P√≥s-processa texto do LLM para garantir linguagem acess√≠vel
    """
    # Substituir siglas comuns que podem escapar
    replacements = {
        r'\bTCO\b': 'custo mensal total',
        r'\bISOFIX\b': 'pontos de fixa√ß√£o para cadeirinha',
        r'\bABS\b': 'freios de seguran√ßa',
        r'\bESP\b': 'controle de estabilidade',
        r'\bkm/L\b': 'quil√¥metros por litro',
    }

    for pattern, replacement in replacements.items():
        text = re.sub(pattern, replacement, text, flags=re.IGNORECASE)

    return text
```

---

## ‚úÖ Checklist de Valida√ß√£o

Ap√≥s gerar cada justificativa, validar:

### Linguagem Acess√≠vel
- [ ] Sem siglas t√©cnicas sem explica√ß√£o (TCO, ISOFIX, ABS, ESP)
- [ ] Valores em reais contextualizados ("incluindo tudo", "X% da sua renda")
- [ ] Consumo traduzido para custo mensal ou uso pr√°tico
- [ ] Categorias explicadas ou contextualizadas (SUV = carro alto, hatch = compacto)

### Tom e Estrutura
- [ ] Usa "voc√™", "seu", "sua" (coloquial)
- [ ] 2-3 frases completas (150-300 caracteres)
- [ ] Tom amig√°vel mas profissional
- [ ] Honesto sobre limita√ß√µes (financeiras, de desempenho)

### Precis√£o
- [ ] Todos os dados mencionados est√£o corretos
- [ ] N√£o inventa informa√ß√µes
- [ ] N√£o usa superlativos injustificados ("excelente", "perfeito")

---

## üìä Teste A/B

Ap√≥s implementar, fazer teste com usu√°rios reais:

**Grupo A:** Justificativas t√©cnicas (baseline)
**Grupo B:** Justificativas did√°ticas (nova)

**M√©tricas:**
1. Taxa de convers√£o (quantos pedem mais informa√ß√µes)
2. Tempo na p√°gina de resultados
3. Feedback qualitativo ("entendi a explica√ß√£o?")
4. NPS (Net Promoter Score)

**Hip√≥tese:** Linguagem acess√≠vel aumenta convers√£o em 20-30%

---

## üéØ Exemplos para Teste Manual

Para validar se as justificativas est√£o did√°ticas, testar com:

### Perfis de Teste

1. **M√£e de primeira viagem** (nunca comprou carro)
   - Usar: "pontos de fixa√ß√£o para cadeirinha", n√£o "ISOFIX"
   - Contextualizar custo: "menos de R$ 2 mil por m√™s"

2. **Jovem no primeiro emprego**
   - Evitar: jarg√µes t√©cnicos
   - Foco: facilidade de uso e economia

3. **Empres√°rio iniciante** (delivery)
   - Traduzir: capacidade de carga em termos pr√°ticos
   - Exemplo: "cabe at√© 100 caixas de pizza"

4. **Motorista de app** (Uber/99)
   - Contextualizar: custo vs. rendimento do app
   - Exemplo: "precisa trabalhar X horas para pagar o carro"

---

## üìñ Documenta√ß√£o para o Usu√°rio Final

### Tooltip Helper (sugest√£o para frontend)

Adicionar tooltips explicativos na interface:

```tsx
<Tooltip label="Quanto voc√™ vai gastar por m√™s com o carro, incluindo parcela, combust√≠vel, manuten√ß√£o e seguro">
  <Text>Custo mensal total: R$ 1.900</Text>
</Tooltip>

<Tooltip label="Pontos de fixa√ß√£o que garantem seguran√ßa m√°xima para cadeirinhas de beb√™">
  <Icon as={InfoIcon} />
</Tooltip>
```

### Gloss√°rio na UI (opcional)

P√°gina de ajuda com gloss√°rio simples:
- "O que significa custo mensal total?"
- "Como √© calculado o consumo?"
- "O que s√£o pontos de fixa√ß√£o para cadeirinha?"

---

## üöÄ Impacto Esperado

### Antes (Linguagem T√©cnica)
- ‚ùå Usu√°rios confusos com siglas
- ‚ùå N√£o entendem se carro cabe no or√ßamento
- ‚ùå N√£o sabem o que √© ISOFIX, TCO, ABS
- ‚ùå Taxa de convers√£o: baseline

### Depois (Linguagem Acess√≠vel)
- ‚úÖ Explica√ß√µes claras e contextualizadas
- ‚úÖ Entendimento financeiro claro ("cabe no bolso?")
- ‚úÖ Tradu√ß√µes pr√°ticas de termos t√©cnicos
- ‚úÖ Taxa de convers√£o: +20-30% (estimado)

---

**Resumo:** Falar a l√≠ngua do usu√°rio, n√£o a l√≠ngua do manual t√©cnico! üó£Ô∏è

**Status:** üìã Guia aprovado - pronto para integrar ao plano da Fase 1
